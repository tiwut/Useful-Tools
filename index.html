<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Useful Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .card-hover:hover { transform: translateY(-4px); transition: all 0.3s ease; }
    </style>
</head>
<body class="min-h-screen">

    <nav class="bg-white border-b sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-600 p-2 rounded-lg shadow-lg shadow-indigo-100">
                    <i class="fas fa-toolbox text-white text-xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 tracking-tight">Useful Tools</h1>
            </div>

            <div class="relative w-full md:w-96">
                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                <input type="text" id="mainSearch" onkeyup="filterView()" 
                    placeholder="Search tools or categories..." 
                    class="w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all">
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-6 py-10">
        
        <div id="folderGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="col-span-full text-center py-20 text-gray-400">
                <i class="fas fa-spinner fa-spin text-3xl mb-4"></i>
                <p>Reading info.txt...</p>
            </div>
        </div>

        <div id="linksView" class="hidden">
            <div class="flex items-center gap-4 mb-8">
                <button onclick="showFolders()" class="flex items-center gap-2 text-indigo-600 font-semibold hover:bg-indigo-50 px-3 py-1.5 rounded-lg transition-all">
                    <i class="fas fa-chevron-left"></i> Back to Root
                </button>
                <h2 id="activeFolderName" class="text-2xl font-bold text-gray-900"></h2>
            </div>
            <div id="linkList" class="bg-white rounded-2xl shadow-sm border border-gray-100 divide-y divide-gray-50 overflow-hidden">
            </div>
        </div>

    </main>

    <script>
        let categories = [];

        async function loadApp() {
            try {
                const response = await fetch('info.txt');
                const text = await response.text();
                
                categories = text.split('\n')
                    .map(line => line.trim())
                    .filter(line => line.length > 0)
                    .map(line => {
                        const [name, desc] = line.split('|');
                        return { 
                            name: name.trim(), 
                            desc: desc ? desc.trim() : 'Tools collection'
                        };
                    });

                renderFolders();
            } catch (err) {
                document.getElementById('folderGrid').innerHTML = `
                    <div class="col-span-full text-center p-10 bg-red-50 text-red-600 rounded-2xl border border-red-100">
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p>Could not find <b>info.txt</b> in root.</p>
                    </div>`;
            }
        }

        function renderFolders() {
            const grid = document.getElementById('folderGrid');
            grid.innerHTML = categories.map(cat => `
                <div class="folder-card bg-white p-6 rounded-2xl border border-gray-100 shadow-sm cursor-pointer card-hover group"
                     onclick="openFolder('${cat.name}')">
                    <div class="w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center mb-4 group-hover:bg-indigo-600 transition-colors">
                        <i class="fas fa-folder text-indigo-500 text-xl group-hover:text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800 mb-1">${cat.name}</h3>
                    <p class="text-sm text-gray-500 line-clamp-2">${cat.desc}</p>
                </div>
            `).join('');
        }

        async function openFolder(folderName) {
            document.getElementById('folderGrid').classList.add('hidden');
            document.getElementById('linksView').classList.remove('hidden');
            document.getElementById('activeFolderName').innerText = folderName;
            
            const linkList = document.getElementById('linkList');
            linkList.innerHTML = `<div class="p-10 text-center text-gray-400"><i class="fas fa-spinner fa-spin mr-2"></i>Loading ${folderName}/url.txt...</div>`;

            try {
                const response = await fetch(`${folderName}/url.txt`);
                const text = await response.text();
                const links = text.split('\n')
                    .map(line => line.trim())
                    .filter(line => line.length > 0)
                    .map(line => {
                        if (line.includes('|')) {
                            const [label, url] = line.split('|');
                            return { label: label.trim(), url: url.trim() };
                        }
                        return { label: line, url: line };
                    });

                linkList.innerHTML = links.map(link => `
                    <a href="${link.url}" target="_blank" class="link-item flex items-center justify-between p-5 hover:bg-indigo-50/50 transition-all group">
                        <div class="flex items-center gap-4">
                            <div class="text-gray-400 group-hover:text-indigo-600"><i class="fas fa-link"></i></div>
                            <div>
                                <div class="font-semibold text-gray-800">${link.label}</div>
                                <div class="text-xs text-gray-400 truncate max-w-xs md:max-w-md">${link.url}</div>
                            </div>
                        </div>
                        <i class="fas fa-external-link-alt text-gray-200 group-hover:text-indigo-400 text-sm"></i>
                    </a>
                `).join('');

            } catch (err) {
                linkList.innerHTML = `<div class="p-10 text-center text-red-400">Error: Could not find ${folderName}/url.txt</div>`;
            }
        }

        function showFolders() {
            document.getElementById('folderGrid').classList.remove('hidden');
            document.getElementById('linksView').classList.add('hidden');
            document.getElementById('mainSearch').value = '';
            renderFolders();
        }

        function filterView() {
            const query = document.getElementById('mainSearch').value.toLowerCase();
            
            if (!document.getElementById('folderGrid').classList.contains('hidden')) {
                const cards = document.querySelectorAll('.folder-card');
                cards.forEach(card => {
                    const title = card.querySelector('h3').innerText.toLowerCase();
                    card.style.display = title.includes(query) ? 'block' : 'none';
                });
            } 
            else {
                const links = document.querySelectorAll('.link-item');
                links.forEach(link => {
                    const name = link.querySelector('.font-semibold').innerText.toLowerCase();
                    link.style.display = name.includes(query) ? 'flex' : 'none';
                });
            }
        }

        loadApp();
    </script>
    <a href="https://tiwut.de/cookie-banner-information.html" style="color: #a0a0a0; text-decoration: none; font-size: 0.8rem;">Legal Notice</a>
    <script data-goatcounter="https://tiwut.goatcounter.com/count"async src="//gc.zgo.at/count.js"></script>
    <script src="https://tiwut.de/cookie.notice.js"></script>
    <script src="https://tiwut.de/Script/enforce_https.js" defer></script>
</body>
</html>
